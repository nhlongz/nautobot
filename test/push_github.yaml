- name: retrieve network configurations
  hosts: localhost
  gather_facts: false
  vars:
    root_path: /var/lib/ol-automation-manager/github
    github_name: github_user
  tasks:
    - name: git push
      shell: |
        cd {{ root_path }}/backups_config
        git config --global user.name {{ github_name }}
        git config --global url.'https://api:{{ github_vault }}@github.com/'.insteadOf 'https://github.com/'
        git add .
        git commit -a -m "test"
        git push
        rm ~/.gitconfig
      register: output 
